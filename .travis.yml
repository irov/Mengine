dist: trusty
sudo: required 

language: cpp

addons:
  apt:
    packages:
    - cmake
    - libgles2-mesa-dev

os:
    - osx

compiler:
    - clang
    
env:
    - TARGET_CPU=amd64 BUILD_CONFIGURATION=Debug
    - TARGET_CPU=amd64 BUILD_CONFIGURATION=Release
        
script:
    # dependencies
    - mkdir build_downloads_cmake
    - pushd build_downloads_cmake
    - cmake ../CMake/Downloads/ -DCMAKE_BUILD_TYPE=$BUILD_CONFIGURATION -DTARGET_CPU=$TARGET_CPU
    - cmake --build . --config $BUILD_CONFIGURATION
    - popd
    
    - mkdir build_dependencies_cmake
    - pushd build_dependencies_cmake
    - cmake ../CMake/Depends_Xcode_IOS_SDL/ -DCMAKE_BUILD_TYPE=$BUILD_CONFIGURATION -DTARGET_CPU=$TARGET_CPU -DCMAKE_TOOLCHAIN_FILE="$PWD/../../../dependencies/ios-cmake/ios.toolchain.cmake" -DIOS_PLATFORM=OS64 -DENABLE_BITCODE=FALSE
    - cmake --build . --config $BUILD_CONFIGURATION
    - popd
    
    - mkdir build_engine_cmake
    - pushd build_engine_cmake
    - cmake ../CMake/Xcode_IOS_SDL/ -DCMAKE_BUILD_TYPE=$BUILD_CONFIGURATION -DTARGET_CPU=$TARGET_CPU -DMENGINE_BUILD_ONLY_EXECUTABLE_MODULE=ON -DMENGINE_LIB_DIR:STRING="build_xcode_ios_sdl/\"$CONFIGURATION\"" -DCMAKE_TOOLCHAIN_FILE="$PWD/../../../dependencies/ios-cmake/ios.toolchain.cmake" -DIOS_PLATFORM=OS64 -DENABLE_BITCODE=TRUE
    - cmake --build . --config $BUILD_CONFIGURATION
    - popd
  
