CMAKE_MINIMUM_REQUIRED(VERSION 3.2)

PROJECT(Puzzle_WIN32)

SET(PROJECT_DIR ${CMAKE_CURRENT_SOURCE_DIR}/../..)
SET(PROJECT_TEMP_DIR ${CMAKE_BINARY_DIR}/solutions)

#path to Mengine cmake
SET(MENGINE_INSTALL_PATH ${PROJECT_DIR}/bin)
SET(MENGINE_CMAKE_DIR ${PROJECT_DIR}/../../cmake/Win32)

macro(MENGINE_PREPARE_FUNCTION)
    DISABLE_PLUGIN(MENGINE_PLUGIN_PYTHONFRAMEWORK)
    DISABLE_PLUGIN(MENGINE_PLUGIN_ASTRALAX)
    DISABLE_PLUGIN(MENGINE_PLUGIN_XLS_EXPORT)
    DISABLE_PLUGIN(MENGINE_PLUGIN_WIN32_CRITICALERRORSMONITOR)
    ENABLE_PLUGIN(MENGINE_PLUGIN_GOAP)
endmacro()

set(MENGINE_USE_SCRIPT_SERVICE OFF CACHE BOOL "MENGINE_USE_SCRIPT_SERVICE" FORCE)
set(MENGINE_EXTERNAL_PROJECT_NAME "PuzzleFramework" CACHE STRING "MENGINE_EXTERNAL_PROJECT_NAME" FORCE)
set(MENGINE_EXTERNAL_SOURCE ON CACHE BOOL "MENGINE_EXTERNAL_SOURCE" FORCE)
set(MENGINE_EXTERNAL_SOURCE_PATH ${PROJECT_DIR}/src CACHE STRING "MENGINE_EXTERNAL_SOURCE_PATH" FORCE)
set(MENGINE_EXTERNAL_TEMP_PATH ${PROJECT_TEMP_DIR}/PuzzleFramework CACHE STRING "MENGINE_EXTERNAL_TEMP_PATH" FORCE)
set(MENGINE_USE_SUBFOLDER ON CACHE STRING "MENGINE_USE_SUBFOLDER" FORCE)
set(MENGINE_SUBFOLDER_NAME "Mengine" CACHE STRING "MENGINE_SUBFOLDER_NAME" FORCE)

ADD_SUBDIRECTORY(${MENGINE_CMAKE_DIR} ${PROJECT_TEMP_DIR}/Mengine)

if(MSVC)
    set_property(TARGET Win32Application PROPERTY VS_DEBUGGER_WORKING_DIRECTORY "${PROJECT_DIR}/resources")
endif()