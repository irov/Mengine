import com.Mengine.Utils

apply from: rootProject.projectDir.getAbsolutePath() + '/plugins/plugin.gradle'
apply from: rootProject.projectDir.getAbsolutePath() + '/gms.gradle'

def MENGINE_APP_PLUGIN_FIREBASE_MESSAGING = Utils.existAppPlugin(project, "MENGINE_APP_PLUGIN_FIREBASE_MESSAGING")

android {
    sourceSets {
        main {
            if (MENGINE_APP_PLUGIN_FIREBASE_MESSAGING == true) {
                println "Plugin [Facebook] add extension 'firebaseMessaging'"
                
                java.srcDirs += ['firebaseMessaging']
            }
        }
    }

    namespace "org.Mengine.Plugin.Facebook"
}

Utils.logAvailable("Facebook add Firebase Messaging extension", MENGINE_APP_PLUGIN_FIREBASE_MESSAGING)

if (MENGINE_APP_PLUGIN_FIREBASE_MESSAGING == true) {
    android.ext.extensions += 'org.Mengine.Plugin.Facebook.MengineFacebookExtensionFirebaseMessaging'

    dependencies {
        implementation project(path: ':plugins:FirebaseMessaging')

        implementation 'com.google.firebase:firebase-messaging'
    }
}

dependencies {
    implementation 'com.facebook.android:facebook-android-sdk:16.2.0'
    implementation 'com.facebook.android:facebook-login:16.2.0'
}

apply from: rootProject.projectDir.getAbsolutePath() + '/plugins/plugin_extensions.gradle'