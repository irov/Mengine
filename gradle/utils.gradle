ext.Utils = [:]

Utils.getBooleanProperty = { String name, Boolean d ->
    def p = project.findProperty(name)

    if (p == null) {
        return d
    }

    if (p as Integer == 0) {
        return false
    }

    return true
}

Utils.getStringProperty = { String name, String d ->
    def p = project.findProperty(name)

    if (p == null) {
        return d
    }

    return p
}

Utils.getIntegerProperty = { String name, Integer d ->
    def p = project.findProperty(name)

    if (p == null) {
        return d
    }

    def v = p as Integer

    return v
}

Utils.isEnableAllLibrary = { ->
    def enableAll = project.findProperty("MENGINE_APP_LIBRARY_ENABLE_ALL")

    if (enableAll != null && (enableAll as Integer) == 1) {
        return true
    }

    return false;
}

Utils.existAppLibrary = { String name ->
    if (Utils.isEnableAllLibrary() == true) {
        return true
    }

    boolean p = Utils.getBooleanProperty(name, true);

    return p;
}

Utils.isEnableAllPlugins = { ->
    def enableAll = project.findProperty("MENGINE_APP_PLUGIN_ENABLE_ALL")

    if (enableAll != null && (enableAll as Integer) == 1) {
        return true
    }

    return false;
}

Utils.existAppPlugin = { String name ->
    if (Utils.isEnableAllPlugins() == true) {
        return true
    }

    boolean p = Utils.getBooleanProperty(name, false);

    return p;
}

Utils.getBooleanAppPluginProperty = { String name, String property ->
    if (Utils.isEnableAllPlugins() == true) {
        return true
    }

    if (Utils.existAppPlugin(name) == false) {
        return false
    }

    boolean p = Utils.getBooleanProperty(property, false);

    return p;
}

Utils.getStringAppPluginProperty = { String name, String property ->
    if (Utils.isEnableAllPlugins() == true) {
        return true
    }

    if (Utils.existAppPlugin(name) == false) {
        return false
    }

    String p = Utils.getStringProperty(property);

    return p;
}

Utils.getIntegerAppPluginProperty = { String name, String property ->
    if (Utils.isEnableAllPlugins() == true) {
        return true
    }

    if (Utils.existAppPlugin(name) == false) {
        return false
    }

    Integer p = Utils.getIntegerProperty(property);

    return p;
}

Utils.existAppService = { String name ->
    boolean p = Utils.getBooleanProperty(name, true);

    return p;
}

Utils.logAvailable = { String name, boolean value ->
    if (value == false) {
        println "\u001b[31m${name}: ${value}\u001b[0m"
    } else {
        println "\u001b[32m${name}: ${value}\u001b[0m"
    }
}

Utils.logString = { String name, String value ->
    println "\u001b[33m${name}: ${value}\u001b[0m"
}

Utils.logInteger = { String name, int value ->
    println "\u001b[33m${name}: ${value}\u001b[0m"
}