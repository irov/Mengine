#include "CollisionShapes.h"
//////////////////////////////////////////////////////////////////////////
BoxShape::BoxShape(mt::vec2f	_width) 
	: width(_width)
{
	evaluteBBox(0);
	setMargin(0.5f);
};
//////////////////////////////////////////////////////////////////////////
bool BoxShape::isConvex() const
{
	return	true;
}
//////////////////////////////////////////////////////////////////////////
void BoxShape::evaluteBBox(float _rot)
{
	float c = fabsf(cos(_rot));
	float s = fabsf(sin(_rot));
	BoundingBox.x = (c * width.x + s * width.y) + margin;
	BoundingBox.y = (s * width.x + c * width.y) + margin;
}
//////////////////////////////////////////////////////////////////////////
const mt::vec2f& BoxShape::getBBoxInfo() const
{
	return	BoundingBox;
}
//////////////////////////////////////////////////////////////////////////
int	BoxShape::getShapeType() const
{
	return	BOX;
}
//////////////////////////////////////////////////////////////////////////
void BoxShape::setMargin(float eps)
{
	margin = eps;
}
//////////////////////////////////////////////////////////////////////////
float BoxShape::getMargin() const
{
	return margin;
}
//////////////////////////////////////////////////////////////////////////
CircleShape::CircleShape(float	_r) 
: radius(_r)
{
	evaluteBBox(0);
	setMargin(0.25f);
};
//////////////////////////////////////////////////////////////////////////
bool	CircleShape::isConvex() const
{
	return	true;
}
//////////////////////////////////////////////////////////////////////////
void CircleShape::evaluteBBox(float _rot)
{
	BoundingBox.x = radius*2.0f + margin;
	BoundingBox.y = radius*2.0f + margin;
}
//////////////////////////////////////////////////////////////////////////
const mt::vec2f& CircleShape::getBBoxInfo() const
{
	return BoundingBox;
}
//////////////////////////////////////////////////////////////////////////
int	CircleShape::getShapeType() const
{
	return	CIRCLE;
}
//////////////////////////////////////////////////////////////////////////
void CircleShape::setMargin(float eps)
{
	margin = eps;
}
//////////////////////////////////////////////////////////////////////////
float CircleShape::getMargin() const
{
	return margin;
}