MENGINE_PROJECT(AppleSKAdNetworkPlugin)

IF(NOT MENGINE_APPLICATION_DEPLOY_SKADNETWORK_ADREVENUE_PLIST_PATH)
    MESSAGE(FATAL_ERROR "Apple SKAdNetwork required setup MENGINE_APPLICATION_DEPLOY_SKADNETWORK_ADREVENUE_PLIST_PATH")
ENDIF()

get_filename_component(MENGINE_APPLICATION_DEPLOY_SKADNETWORK_ADREVENUE_PLIST_NAME ${MENGINE_DEPLOY_PATH}/${MENGINE_APPLICATION_DEPLOY_SKADNETWORK_ADREVENUE_PLIST_PATH} NAME_WE)

MESSAGE("Apple SKAdNetwork AdRevenue plist path: ${MENGINE_APPLICATION_DEPLOY_SKADNETWORK_ADREVENUE_PLIST_PATH}")
MESSAGE("Apple SKAdNetwork AdRevenue plist name: ${MENGINE_APPLICATION_DEPLOY_SKADNETWORK_ADREVENUE_PLIST_NAME}")

ADD_FILTER(
src
    AppleSKAdNetworkPlugin.h
    AppleSKAdNetworkPlugin.mm
	
	AppleSKAdNetworkDetail.h
	AppleSKAdNetworkDetail.mm
)

ADD_DEFINITIONS(-DMENGINE_APPLE_SKADNETWORK_ADREVENUE_PLIST_NAME="${MENGINE_APPLICATION_DEPLOY_SKADNETWORK_ADREVENUE_PLIST_NAME}")

ADD_MENGINE_PLUGIN(MENGINE_PLUGIN_APPLE_SKADNETWORK)

ADD_MENGINE_APPLE_APPLICATION_DELEGATE("AppleSKAdNetworkPlugin")

ADD_MENGINE_APPLE_RESOURCES(${MENGINE_APPLICATION_DEPLOY_SKADNETWORK_ADREVENUE_PLIST_PATH})

ADD_MENGINE_APPLE_FRAMEWORK(StoreKit)
