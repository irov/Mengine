MENGINE_PROJECT(PNGPlugin)

ADD_FILTER(
src
    PNGPlugin.cpp
    PNGPlugin.def
    PNGPlugin.h

    ImageDecoderPNG.cpp
    ImageDecoderPNG.h
    ImageEncoderPNG.cpp
    ImageEncoderPNG.h
)

INCLUDE_DIRECTORIES(${THIRDPARTY_CONFIG_DIR}/zlib)
INCLUDE_DIRECTORIES(${THIRDPARTY_DIR}/zlib)

INCLUDE_DIRECTORIES(${THIRDPARTY_CONFIG_DIR}/libpng)
INCLUDE_DIRECTORIES(${THIRDPARTY_DIR}/libpng)

ADD_MENGINE_PLUGIN(MENGINE_PLUGIN_PNG)

if(WIN32)
    TARGET_LINK_LIBRARIES(${PROJECT_NAME} ${THIRDPARTY_LIB_DIR}/${MENGINE_LIB_PREFIX}zsd${MENGINE_LIB_SUFFIX})
else()
    TARGET_LINK_LIBRARIES(${PROJECT_NAME} ${THIRDPARTY_LIB_DIR}/${MENGINE_LIB_PREFIX}z${MENGINE_LIB_SUFFIX})
endif()

if(UNIX)
    TARGET_LINK_LIBRARIES(${PROJECT_NAME} ${THIRDPARTY_LIB_DIR}/${CMAKE_STATIC_LIBRARY_PREFIX}png16${MENGINE_LIB_SUFFIX})
elseif(MENGINE_TOOLCHAIN_MINGW)
    TARGET_LINK_LIBRARIES(${PROJECT_NAME} ${THIRDPARTY_LIB_DIR}/${CMAKE_STATIC_LIBRARY_PREFIX}png16${MENGINE_LIB_SUFFIX})
else()
    TARGET_LINK_LIBRARIES(${PROJECT_NAME} ${THIRDPARTY_LIB_DIR}/libpng16_static${MENGINE_LIB_SUFFIX})
endif()

TARGET_LINK_LIBRARIES(${PROJECT_NAME} Kernel)