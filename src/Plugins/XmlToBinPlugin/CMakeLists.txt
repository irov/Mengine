set(MY_LIB_NAME XmlToBinPlugin)

ADD_FILTER(
src
	XmlToBinPlugin.h
    XmlToBinPlugin.def
	XmlToBinPlugin.cpp
	XmlToBinDecoder.h
	XmlToBinDecoder.cpp    
	XmlToBinInterface.h
)

add_definitions(-DMETABUF_EXTERNAL_CONFIG)
add_definitions(-DMENGINE_PLUGIN_DLL)

INCLUDE_DIRECTORIES(${THIRDPARTY_DIR}/pugixml/src)
INCLUDE_DIRECTORIES(${THIRDPARTY_DIR}/metabuf/include)
INCLUDE_DIRECTORIES(${THIRDPARTY_DIR}/metabuf/src)
INCLUDE_DIRECTORIES(${THIRDPARTY_DIR}/utf8/source)
INCLUDE_DIRECTORIES(${THIRDPARTY_DIR}/libmath/include)
		 
ADD_MENGINE_SHARED(Plugins)

SET(CMAKE_CXX_LINK_FLAGS "${CMAKE_CXX_LINK_FLAGS}/EXPORT:dllCreatePlugin")

TARGET_LINK_LIBRARIES(${MY_LIB_NAME} Kernel)

TARGET_LINK_LIBRARIES(${MY_LIB_NAME} ${THIRDPARTY_LIB_DIR}/${MENGINE_LIB_PREFIX}xml2metabuf${MENGINE_LIB_SUFFIX})
TARGET_LINK_LIBRARIES(${MY_LIB_NAME} ${THIRDPARTY_LIB_DIR}/${MENGINE_LIB_PREFIX}pugixml${MENGINE_LIB_SUFFIX})
TARGET_LINK_LIBRARIES(${MY_LIB_NAME} ${THIRDPARTY_LIB_DIR}/${MENGINE_LIB_PREFIX}stdex${MENGINE_LIB_SUFFIX})
