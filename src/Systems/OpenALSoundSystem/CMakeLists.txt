MENGINE_PROJECT(OpenALSoundSystem)

ADD_FILTER(
src
    OpenALSoundIncluder.h
    OpenALSoundBufferBase.cpp
    OpenALSoundBufferBase.h
    OpenALSoundBufferMemory.cpp
    OpenALSoundBufferMemory.h
    OpenALSoundBufferStream.cpp
    OpenALSoundBufferStream.h
    OpenALSoundSource.cpp
    OpenALSoundSource.h
    OpenALSoundSystem.cpp
    OpenALSoundSystem.h
    OpenALSoundErrorHelper.cpp
    OpenALSoundErrorHelper.h
)

INCLUDE_DIRECTORIES(${THIRDPARTY_CONFIG_DIR}/openal-soft)
INCLUDE_DIRECTORIES(${THIRDPARTY_DIR}/openal-soft/include)

IF(MENGINE_TOOLCHAIN_MSVC OR MENGINE_TOOLCHAIN_MINGW OR MENGINE_TARGET_IOS OR MENGINE_TARGET_UNIX)
    add_definitions(-DAL_LIBTYPE_STATIC)
ENDIF()

ADD_MENGINE_LIBRARY(Systems)

IF(MENGINE_TOOLCHAIN_MSVC OR MENGINE_TOOLCHAIN_MINGW)
    TARGET_LINK_LIBRARIES(${PROJECT_NAME} ${THIRDPARTY_LIB_DIR}/${MENGINE_LIB_PREFIX}OpenAL32${MENGINE_LIB_SUFFIX})
    TARGET_LINK_LIBRARIES(${PROJECT_NAME} Winmm)
ENDIF()

IF(MENGINE_TARGET_UNIX)
    TARGET_LINK_LIBRARIES(${PROJECT_NAME} ${THIRDPARTY_LIB_DIR}/${MENGINE_LIB_PREFIX}openal${MENGINE_LIB_SUFFIX})
ENDIF()

if(MENGINE_TOOLCHAIN_MINGW)
    TARGET_LINK_LIBRARIES(${PROJECT_NAME} atomic)
endif()

IF(MENGINE_TARGET_ANDROID)
    ADD_LIBRARY_IMPORTED(OPENAL_IMPORTED "${MENGINE_DEPENDENCIES_LIBRARY_OUTPUT_DIRECTORY}/libopenal.so")
ENDIF()