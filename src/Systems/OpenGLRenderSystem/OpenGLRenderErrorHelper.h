#pragma once

#include "Interface/ServiceProviderInterface.h"

#include "Environment/OpenGL/OpenGLRenderIncluder.h"

#include "Config/Char.h"

//////////////////////////////////////////////////////////////////////////
namespace Mengine
{
    namespace Helper
    {
        const Char * glGetErrorString( GLenum _err );
        bool OpenGLRenderErrorCheck( const Char * _file, uint32_t _line );
    }
}
//////////////////////////////////////////////////////////////////////////
#ifdef MENGINE_RENDER_CHECK_ERROR_ENABLE
//////////////////////////////////////////////////////////////////////////
#   define MENGINE_OPENGL_RENDER_CHECK_ERROR() Mengine::Helper::OpenGLRenderErrorCheck( __FILE__, __LINE__ )
#   define MENGINE_OPENGL_RENDER_CHECK_ERROR_IF() if( MENGINE_OPENGL_RENDER_CHECK_ERROR() == true )
//////////////////////////////////////////////////////////////////////////
#else
//////////////////////////////////////////////////////////////////////////
#   define MENGINE_OPENGL_RENDER_CHECK_ERROR() (false)
#   define MENGINE_OPENGL_RENDER_CHECK_ERROR_IF() for( ;false; )
//////////////////////////////////////////////////////////////////////////
#endif
//////////////////////////////////////////////////////////////////////////
#define MENGINE_GLCALL( Method, Args )\
    do{\
        Method Args;\
        MENGINE_OPENGL_RENDER_CHECK_ERROR();\
    }while(false)
//////////////////////////////////////////////////////////////////////////
#define MENGINE_GLCALLR( R, Method, Args )\
    do{\
        R = Method Args;\
        MENGINE_OPENGL_RENDER_CHECK_ERROR();\
    }while(false)
//////////////////////////////////////////////////////////////////////////
#define MENGINE_IF_GLCALLR( R, Method, Args )\
    R = Method Args;\
    MENGINE_OPENGL_RENDER_CHECK_ERROR_IF()
//////////////////////////////////////////////////////////////////////////
#define MENGINE_IF_GLCALL( Method, Args )\
    Method Args;\
    MENGINE_OPENGL_RENDER_CHECK_ERROR_IF()
//////////////////////////////////////////////////////////////////////////